<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Sora Malaya ‚Äì UGC Prompt Generator PRO+</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #050509;
      --card: #11121a;
      --card-soft: #171825;
      --accent: #f5c85b;
      --accent-soft: rgba(245, 200, 91, 0.18);
      --text: #f7f7f7;
      --muted: #aaaaaa;
      --border: #252638;
      --radius-lg: 16px;
      --radius-md: 10px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1a1b2b 0, #050509 55%);
      color: var(--text);
      padding: 18px 14px 40px;
    }

    .container {
      max-width: 980px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      font-size: 1.8rem;
      margin: 4px 0 6px;
    }

    .sub {
      text-align: center;
      font-size: 0.88rem;
      color: var(--muted);
      margin-bottom: 16px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: rgba(0,0,0,0.45);
      color: var(--accent);
      font-size: 0.78rem;
      margin: 0 auto 8px;
      justify-content: center;
      width: fit-content;
    }

    .preset-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      margin-bottom: 14px;
    }

    .preset-btn {
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.85);
      color: var(--muted);
      padding: 4px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .preset-btn span {
      font-size: 0.85rem;
    }

    .preset-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(245,200,91,0.12);
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 14px;
    }

    @media (max-width: 768px) {
      .grid { grid-template-columns: minmax(0, 1fr); }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px rgba(0,0,0,0.45);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 8px;
    }

    .card-title {
      font-size: 0.96rem;
      font-weight: 600;
    }

    .card-desc {
      font-size: 0.8rem;
      color: var(--muted);
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-top: 8px;
      margin-bottom: 3px;
    }

    input[type="text"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 7px 9px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--card-soft);
      color: var(--text);
      font-size: 0.82rem;
      outline: none;
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    input::placeholder,
    textarea::placeholder {
      color: #666a80;
    }

    input[type="file"] {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .help {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .btn {
      width: 100%;
      padding: 11px 14px;
      border-radius: 999px;
      border: none;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin-top: 10px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #f5c85b, #f59e0b);
      color: #1b1305;
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
    }

    .btn:active { transform: scale(0.98); }

    #output {
      width: 100%;
      min-height: 370px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: #050509;
      color: #e5e7eb;
      padding: 10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      resize: vertical;
      white-space: pre;
    }

    .output-title {
      font-size: 0.86rem;
      margin-top: 4px;
      margin-bottom: 4px;
    }

    .pill-row {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 6px;
      margin-bottom: 4px;
    }

    .pill {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      font-size: 0.7rem;
      color: var(--muted);
    }

    .img-preview-box {
      margin-top: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .img-preview-box img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid var(--border);
      display: none;
    }

    .img-preview-name {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .toast {
      position: fixed;
      bottom: 14px;
      right: 14px;
      background: #111827;
      color: var(--text);
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 0.78rem;
      border: 1px solid var(--accent-soft);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: all 0.25s ease;
      z-index: 30;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="badge">
      ‚ö° Sora Malaya Studio ‚Ä¢ UGC Generator PRO+
    </div>
    <h1>Sora Malaya UGC Prompt Generator PRO+</h1>
    <p class="sub">Pilih preset ‚Üí ubah detail produk ‚Üí (opsyenal upload gambar rujukan) ‚Üí klik generate ‚Üí terus dapat <b>JSON UGC</b>.</p>

    <!-- PRESET BAR -->
    <div class="preset-bar">
      <button class="preset-btn" data-preset="food" onclick="applyPreset('food', this)"><span>üçõ</span> Food</button>
      <button class="preset-btn" data-preset="skincare" onclick="applyPreset('skincare', this)"><span>üíÜ‚Äç‚ôÄÔ∏è</span> Skincare</button>
      <button class="preset-btn" data-preset="service" onclick="applyPreset('service', this)"><span>üìö</span> Service / Kelas</button>
      <button class="preset-btn" data-preset="gadget" onclick="applyPreset('gadget', this)"><span>üì±</span> Gadget</button>
      <button class="preset-btn" data-preset="fashion" onclick="applyPreset('fashion', this)"><span>üëó</span> Fashion</button>
      <button class="preset-btn" data-preset="fnb" onclick="applyPreset('fnb', this)"><span>‚òï</span> F&B Review / Caf√©</button>
      <button class="preset-btn" data-preset="corporate" onclick="applyPreset('corporate', this)"><span>üè¢</span> Corporate Casual</button>
    </div>

    <div class="grid">
      <!-- LEFT: FORM -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Input Produk & Gaya UGC</div>
            <div class="card-desc">Preset hanya bagi ‚Äústarting point‚Äù. Semua field masih boleh diubah ikut brand.</div>
          </div>
        </div>

        <label>Nama Produk</label>
        <input id="product_name" type="text" placeholder="Contoh: Nasi Lemak Daun Pisang Mak Zah">

        <label>Jenis Produk</label>
        <input id="product_type" type="text" placeholder="Contoh: Food, Skincare, Service">

        <label>Kategori Produk</label>
        <input id="product_category" type="text" placeholder="Contoh: Food & Beverage, Skincare">

        <label>Gambar Rujukan Produk (opsyenal)</label>
        <input id="product_image" type="file" accept="image/*" onchange="handleImageUpload(event)">
        <div class="img-preview-box">
          <img id="product_image_preview" alt="Preview gambar">
          <div class="img-preview-name" id="product_image_label">Tiada gambar dipilih.</div>
        </div>
        <div class="help">Gambar ini hanya untuk rujukan & preview di browser. Ia tidak di-upload ke server.</div>

        <label>Manfaat Utama (pisahkan dengan koma)</label>
        <textarea id="main_benefits" placeholder="Contoh: sambal padu, harga mampu milik, mengenyangkan"></textarea>

        <label>Selling Point / Keunikan (pisahkan dengan koma)</label>
        <textarea id="selling_points" placeholder="Contoh: guna santan segar, lauk hari-hari tukar, bau wangi satu rumah"></textarea>

        <label>Video Style Category</label>
        <input id="video_style_category" type="text" placeholder="Contoh: Lifestyle casual, Food review, POV harian">

        <label>UGC Hook Type</label>
        <input id="ugc_hook_type" type="text" placeholder="Contoh: Visual hook, Story hook, Problem hook">

        <label>UGC Angle Type</label>
        <input id="ugc_angle_type" type="text" placeholder="Contoh: Honest review, First time try, Problem-solution">

        <div class="pill-row">
          <span class="pill">Hook wajib keluar dalam 1‚Äì2 saat pertama</span>
          <span class="pill">Angle ikut gaya penceritaan</span>
        </div>

        <hr style="border:0; border-top:1px solid var(--border); margin:10px 0;">

        <label>Gender Talent</label>
        <select id="talent_gender">
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>

        <label>Umur Talent (range)</label>
        <input id="talent_age_range" type="text" placeholder="Contoh: 18‚Äì24, 25‚Äì34">

        <label>Gaya Look</label>
        <input id="talent_look" type="text" placeholder="Contoh: Casual, Professional, Smart casual">

        <label>Personaliti Talent</label>
        <input id="talent_personality" type="text" placeholder="Contoh: Friendly, Calm & warm, Playful">

        <label>Gaya Pakaian</label>
        <input id="clothing_style" type="text" placeholder="Contoh: T-shirt plain, Baju kurung hijab, Smart casual">

        <label>Tempo Suara (0.90 ‚Äì 0.98)</label>
        <input id="voice_tempo" type="number" step="0.01" value="0.94">

        <label>Emosi Suara</label>
        <input id="voice_emotion" type="text" placeholder="Contoh: warm_friendly, calm_trust, emotional_soft">

        <label>Vibrance Level</label>
        <input id="vibrance_level" type="number" value="10">

        <label>Exposure Level</label>
        <input id="exposure_level" type="number" step="0.1" value="0.2">

        <label>Temperature</label>
        <select id="temperature">
          <option value="warm">warm</option>
          <option value="neutral">neutral</option>
          <option value="cool">cool</option>
        </select>

        <label>Nota Tambahan Visual</label>
        <textarea id="additional_notes" placeholder="Contoh: suasana pagi di dapur rumah, mood cozy kampung, natural light dari tingkap"></textarea>

        <div style="display:flex; gap:8px; margin-top:8px;">
          <div style="flex:1;">
            <label>Jumlah Scene</label>
            <input id="scene_count" type="number" value="4" min="3" max="6">
          </div>
          <div style="flex:1;">
            <label>Durasi Sasaran (saat)</label>
            <input id="duration_target" type="number" value="12">
            <div class="help">Contoh: 10, 12, 15</div>
          </div>
        </div>

        <button class="btn btn-primary" onclick="generateJSON()">
          üöÄ Generate JSON UGC
        </button>
      </div>

      <!-- RIGHT: OUTPUT -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Output JSON Siap Pakai</div>
            <div class="card-desc">Copy ‚Üí paste terus ke GPT / Sora / Notion sebagai template.</div>
          </div>
          <button class="btn btn-ghost" type="button" onclick="copyOutput()" style="width:auto; padding-inline:10px; font-size:0.78rem;">
            üìã Copy JSON
          </button>
        </div>

        <div class="output-title">JSON Generated:</div>
        <textarea id="output" readonly placeholder="// Tekan 'Generate JSON UGC' untuk hasilkan template..."></textarea>

        <div class="help" style="margin-top:6px;">
          ‚Ä¢ Semua dialog akan dalam Bahasa Melayu (Malaysia) bila kau guna JSON ni sebagai prompt.<br>
          ‚Ä¢ Scene 1 auto jadi hook. Scene lain auto ikut flow intro ‚Üí demo ‚Üí detail ‚Üí CTA.<br>
          ‚Ä¢ Boleh adjust semula ikut project Hazel Iris / Sora Malaya.
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    const PRESETS = {
      food: {
        video_style_category: "Food review, POV harian, Lifestyle casual",
        ugc_hook_type: "Visual hook, Reaction hook",
        ugc_angle_type: "Honest review, First time try",
        talent_gender: "Male",
        talent_age_range: "25‚Äì34",
        talent_look: "Casual",
        talent_personality: "Friendly, Playful",
        clothing_style: "T-shirt plain atau baju santai harian",
        voice_tempo: 0.94,
        voice_emotion: "warm_friendly",
        vibrance_level: 12,
        exposure_level: 0.2,
        temperature: "warm",
        additional_notes: "Shoot dekat dapur rumah atau kedai makan, suasana pagi atau petang, ada steam keluar dari makanan, lampu lembut dan cozy."
      },
      skincare: {
        video_style_category: "Skincare routine, Educational UGC, Soft aesthetic",
        ugc_hook_type: "Problem hook, Skin close-up visual hook",
        ugc_angle_type: "Problem-solution, Daily routine",
        talent_gender: "Female",
        talent_age_range: "18‚Äì30",
        talent_look: "Minimalist, Clean",
        talent_personality: "Calm & warm",
        clothing_style: "Homewear lembut, baju longgar, hijab lembut warna pastel (jika berhijab)",
        voice_tempo: 0.92,
        voice_emotion: "calm_trust",
        vibrance_level: 8,
        exposure_level: 0.3,
        temperature: "neutral",
        additional_notes: "Background bilik atau toilet yang bersih, warna putih / pastel, natural light dari tingkap, mood tenang dan soothing."
      },
      service: {
        video_style_category: "Educational UGC, Talking head, Corporate casual",
        ugc_hook_type: "Problem hook, Story hook",
        ugc_angle_type: "Problem-solution, Test jujur tak ditaja",
        talent_gender: "Male",
        talent_age_range: "25‚Äì40",
        talent_look: "Smart casual",
        talent_personality: "Confident, Calm & warm",
        clothing_style: "Kemeja simple / baju smart casual, boleh tambah jaket nipis",
        voice_tempo: 0.95,
        voice_emotion: "professional_clear",
        vibrance_level: 6,
        exposure_level: 0.1,
        temperature: "neutral",
        additional_notes: "Background meja kerja, laptop di tepi, suasana macam coach / cikgu terangkan topik dengan santai tapi jelas."
      },
      gadget: {
        video_style_category: "Unboxing, Tech review, POV penggunaan",
        ugc_hook_type: "Visual hook, Reaction hook",
        ugc_angle_type: "Test sendiri di rumah, Comparison produk lain",
        talent_gender: "Male",
        talent_age_range: "18‚Äì35",
        talent_look: "Casual / Trendy",
        talent_personality: "Excited, Playful",
        clothing_style: "Hoodie / T-shirt streetwear",
        voice_tempo: 0.96,
        voice_emotion: "excited",
        vibrance_level: 14,
        exposure_level: 0.15,
        temperature: "cool",
        additional_notes: "Meja setup simple, ada lampu RGB sikit, close-up gadget, tangan pegang dan tunjuk fungsi satu-satu."
      },
      fashion: {
        video_style_category: "OOTD, Lifestyle casual, TikTok style",
        ugc_hook_type: "Visual hook, POV hook",
        ugc_angle_type: "Daily routine, Story hook",
        talent_gender: "Female",
        talent_age_range: "18‚Äì30",
        talent_look: "Trendy",
        talent_personality: "Playful, Friendly",
        clothing_style: "Baju fesyen terkini, hijab styled (jika berhijab), atau outfit streetwear sopan",
        voice_tempo: 0.95,
        voice_emotion: "warm_friendly",
        vibrance_level: 16,
        exposure_level: 0.25,
        temperature: "warm",
        additional_notes: "Shoot depan cermin, street shot, atau dalam bilik yang kemas. Banyak movement kecil, main dengan baju atau beg."
      },
      fnb: {
        video_style_category: "Cafe review, Food & Beverage, Aesthetic B-roll",
        ugc_hook_type: "Visual hook, Story hook",
        ugc_angle_type: "First time try, Honest review",
        talent_gender: "Female",
        talent_age_range: "20‚Äì35",
        talent_look: "Smart casual / Cafe aesthetic",
        talent_personality: "Calm & warm",
        clothing_style: "Baju sopan warna lembut, sesuai ambience caf√©",
        voice_tempo: 0.93,
        voice_emotion: "emotional_soft",
        vibrance_level: 10,
        exposure_level: 0.25,
        temperature: "warm",
        additional_notes: "Ambil ambience caf√©, bunyi background lembut, close-up minuman, swirl ais / foam, tangan pegang cawan."
      },
      corporate: {
        video_style_category: "Corporate casual, Brand intro, Professional UGC",
        ugc_hook_type: "Story hook, Problem hook",
        ugc_angle_type: "Authority review, Problem-solution",
        talent_gender: "Male",
        talent_age_range: "28‚Äì45",
        talent_look: "Corporate / Professional",
        talent_personality: "Serious professional, Calm & warm",
        clothing_style: "Kemeja / blazer, kemas dan sopan",
        voice_tempo: 0.95,
        voice_emotion: "professional_clear",
        vibrance_level: 4,
        exposure_level: 0.1,
        temperature: "neutral",
        additional_notes: "Background pejabat, board, atau ruang kerja yang bersih. Mood yakin tapi approachable."
      }
    };

    let productImageName = "";

    function setToast(message) {
      const t = document.getElementById("toast");
      t.textContent = message;
      t.classList.add("show");
      setTimeout(() => t.classList.remove("show"), 1800);
    }

    function handleImageUpload(event) {
      const file = event.target.files[0];
      const preview = document.getElementById("product_image_preview");
      const label = document.getElementById("product_image_label");

      if (!file) {
        productImageName = "";
        if (preview) {
          preview.src = "";
          preview.style.display = "none";
        }
        if (label) label.textContent = "Tiada gambar dipilih.";
        return;
      }

      productImageName = file.name;
      if (label) label.textContent = file.name;

      if (preview) {
        const reader = new FileReader();
        reader.onload = (e) => {
          preview.src = e.target.result;
          preview.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    }

    function applyPreset(key, btn) {
      const preset = PRESETS[key];
      if (!preset) return;

      document.querySelectorAll(".preset-btn").forEach(b => b.classList.remove("active"));
      if (btn) btn.classList.add("active");

      document.getElementById("video_style_category").value = preset.video_style_category;
      document.getElementById("ugc_hook_type").value = preset.ugc_hook_type;
      document.getElementById("ugc_angle_type").value = preset.ugc_angle_type;

      document.getElementById("talent_gender").value = preset.talent_gender;
      document.getElementById("talent_age_range").value = preset.talent_age_range;
      document.getElementById("talent_look").value = preset.talent_look;
      document.getElementById("talent_personality").value = preset.talent_personality;
      document.getElementById("clothing_style").value = preset.clothing_style;

      document.getElementById("voice_tempo").value = preset.voice_tempo;
      document.getElementById("voice_emotion").value = preset.voice_emotion;
      document.getElementById("vibrance_level").value = preset.vibrance_level;
      document.getElementById("exposure_level").value = preset.exposure_level;
      document.getElementById("temperature").value = preset.temperature;
      document.getElementById("additional_notes").value = preset.additional_notes;

      setToast("Preset " + key.toUpperCase() + " digunakan. Boleh edit ikut brand.");
    }

    function splitToArray(str) {
      return str
        .split(",")
        .map(s => s.trim())
        .filter(Boolean);
    }

    function safeNumber(val, fallback) {
      const n = parseFloat(val);
      return isNaN(n) ? fallback : n;
    }

    function generateScenes(sceneCount, totalDuration, productName, hookType, angleType) {
      const scenes = [];
      const baseDuration = totalDuration / sceneCount;
      const roundedBase = Math.max(2, Math.round(baseDuration));

      for (let i = 1; i <= sceneCount; i++) {
        let purpose = "Detail";
        if (i === 1) purpose = "Hook";
        else if (i === 2) purpose = "Intro produk";
        else if (i === sceneCount) purpose = "CTA";

        let camera_shot = "medium_shot";
        if (i === 1) camera_shot = "close_up";
        if (i === 3) camera_shot = "top_down_food";

        let movement = i === 1 ? "handheld" : "slow push-in";

        let dialogue = "";
        if (i === 1) {
          dialogue =
            `\"Serius‚Ä¶ ${productName} ni lain macam.\" (senyum kecil)\n` +
            `\"First time cuba, rasa ${hookType.toLowerCase()} tu terus tarik perhatian.\"`;
        } else if (i === 2) {
          dialogue =
            `\"${angleType}‚Ä¶ saya suka sebab rasa dia jujur, macam borak dengan kawan sendiri je.\"`;
        } else if (i === sceneCount) {
          dialogue =
            `"Kalau korang rasa suka sesuatu yang simple tapi padu‚Ä¶ cuba je ${productName} ni, lepas tu cerita balik kat saya okay."`;
        } else {
          dialogue =
            `"Lepas first try tu, saya terus faham kenapa ramai ulang beli. Rasa dia melekat dalam kepala, susah nak lupa."`;
        }

        const overlay_text =
          i === 1 ? "Hook awal" :
          i === sceneCount ? "Cuba sekali" :
          "Real review";

        scenes.push({
          scene_number: i,
          purpose,
          duration_s: roundedBase,
          camera_shot,
          movement_style: movement,
          scene_description:
            i === 1
              ? "Talent dekat dengan kamera, tunjuk produk atau reaksi muka kuat. Background simple, fokus pada emosi muka."
              : i === 2
              ? "Talent duduk santai, produk di atas meja / tangan. Lighting lembut, suasana rumah atau kedai."
              : i === sceneCount
              ? "Close-up produk + tangan talent, sambil sebut CTA lembut. Mungkin ada sedikit senyuman akhir."
              : "Demo ringkas penggunaan produk atau visual suasana, supaya nampak real dan bukan iklan hard-sell.",
          dialogue,
          overlay_text,
          emotion_level: i === 1 || i === sceneCount ? "medium_high" : "medium"
        });
      }
      return scenes;
    }

    function generateJSON() {
      const product_name = document.getElementById("product_name").value || "Nama Produk";
      const product_type = document.getElementById("product_type").value || "Produk";
      const product_category = document.getElementById("product_category").value || "Kategori";

      const main_benefits = splitToArray(document.getElementById("main_benefits").value);
      const selling_points = splitToArray(document.getElementById("selling_points").value);

      const video_style_category = document.getElementById("video_style_category").value || "Lifestyle casual";
      const ugc_hook_type = document.getElementById("ugc_hook_type").value || "Visual hook";
      const ugc_angle_type = document.getElementById("ugc_angle_type").value || "Honest review";

      const talent_gender = document.getElementById("talent_gender").value;
      const talent_age_range = document.getElementById("talent_age_range").value || "25‚Äì34";
      const talent_look = document.getElementById("talent_look").value || "Casual";
      const talent_personality = document.getElementById("talent_personality").value || "Friendly";
      const clothing_style = document.getElementById("clothing_style").value || "Smart casual";

      const voice_tempo = safeNumber(document.getElementById("voice_tempo").value, 0.94);
      const voice_emotion = document.getElementById("voice_emotion").value || "warm_friendly";

      const vibrance_level = safeNumber(document.getElementById("vibrance_level").value, 10);
      const exposure_level = safeNumber(document.getElementById("exposure_level").value, 0.2);
      const temperature = document.getElementById("temperature").value;

      const additional_notes = document.getElementById("additional_notes").value || "Suasana natural, mood santai, lighting lembut.";

      const scene_count = Math.max(3, Math.min(6, parseInt(document.getElementById("scene_count").value || "4", 10)));
      const duration_target_raw = document.getElementById("duration_target").value || "12";
      const duration_target_s = safeNumber(duration_target_raw, 12);

      const jsonOutput = {
        meta: {
          template_name: `UGC ‚Äì ${product_name} ‚Äì Auto Generated by Sora Malaya`,
          version: "v1.1-auto-pro+",
          video_type: "UGC Content",
          aspect_ratio: "9:16",
          duration_target_s: duration_target_s,
          platform: "Reels/TikTok/Shorts"
        },

        product: {
          name: product_name,
          type: product_type,
          category: product_category,
          image_reference_name: productImageName || "",
          main_benefits: main_benefits.length ? main_benefits : [
            "Sedap konsisten setiap kali",
            "Harga masih mampu milik",
            "Senang dibawa dan dikongsi"
          ],
          selling_points: selling_points.length ? selling_points : [
            "Resipi sendiri, bukan kilang",
            "Rasa macam air tangan mak",
            "Portion jujur, tak kedekut"
          ]
        },

        video_style: {
          category: video_style_category
        },

        ugc_style: {
          hook_type: ugc_hook_type,
          angle_type: ugc_angle_type,
          hook_description: `Hook bermula dengan ${ugc_hook_type.toLowerCase()} ‚Äì muka talent dekat dengan kamera atau close-up produk, emosi jujur, tarik perhatian dalam 1 saat pertama.`,
          angle_description: `Angle ${ugc_angle_type.toLowerCase()}, gaya bercerita santai seolah-olah share pengalaman sendiri tanpa skrip berat.`
        },

        talent: {
          gender: talent_gender,
          age_range: talent_age_range,
          look: talent_look,
          personality: talent_personality,
          clothing: clothing_style
        },

        voice_settings: {
          tempo: voice_tempo,
          emotion: voice_emotion,
          breathing_enabled: true,
          natural_pauses: true,
          robotic_filter_reduction: true,
          notes: "Bahasa Melayu (Malaysia) penuh, dialog pendek-pendek dengan jeda semula jadi. Elakkan baca macam iklan TV; lebih kepada kawan share pengalaman."
        },

        color_grade: {
          vibrance: vibrance_level,
          exposure: exposure_level,
          temperature: temperature,
          contrast_level: "medium"
        },

        audio_mix: {
          voice_volume: 1.0,
          bg_music_volume: 0.35,
          sfx_volume: 0.4,
          bg_music_style: "soft_lofi",
          ducking_on_dialogue: true
        },

        global_notes: {
          lighting: `Lighting lembut ikut nota: ${additional_notes}. Elakkan bayang keras. Pastikan muka talent jelas dan produk sentiasa nampak.`,
          pace_note: "Pacing perlahan natural, macam borak dengan kawan. Satu ayat, satu nafas. Jangan terlalu laju.",
          emotion_note: "Nada jujur, santai, macam cerita betul. Bukan baca skrip iklan yang kaku.",
          cta_note: "CTA lembut tapi jelas ‚Äî ajak cuba, bukan memaksa."
        },

        scenes: generateScenes(scene_count, duration_target_s, product_name, ugc_hook_type, ugc_angle_type),

        cta_presets_used: {
          type: "soft",
          line: `Kalau korang rasa nak cuba sesuatu yang simple tapi padu, try je ${product_name} ni‚Ä¶ lepas tu tag saya dan cerita pengalaman korang.`
        }
      };

      document.getElementById("output").value =
        JSON.stringify(jsonOutput, null, 2);
      setToast("JSON UGC berjaya dijana ‚úî");
    }

    function copyOutput() {
      const out = document.getElementById("output");
      if (!out.value.trim()) return;
      navigator.clipboard.writeText(out.value).then(() => {
        setToast("JSON disalin ke clipboard ‚úî");
      });
    }

    // Auto select preset default & generate sample
    window.addEventListener("load", () => {
      const defaultBtn = document.querySelector('.preset-btn[data-preset="food"]');
      if (defaultBtn) applyPreset("food", defaultBtn);
      generateJSON();
    });
  </script>
</body>
</html>
